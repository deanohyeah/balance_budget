define(function(e){var t=e("jquery"),n=e("underscore"),r=e("collections/list"),i=e("views/item_view"),s=e("views/benchmark_view");BudgetSectionView=e("views/budget_section_view");return YourBudgetItemView=i.extend({el:".budget_container",events:{"click .icon-info":"showInfo","dragstart .proposal":"dragStart","dragend .proposal":"dragEnd","hover .proposal":"proposalHover","click .proposal":"clickDrop","dragenter .budget_proposal_container, .proposal_container":"dragEnter","drop .budget_proposal_container, .proposal_container":"dragDrop","dragover .budget_proposal_container, .proposal_container":"dragOver"},initialize:function(){var e=new s},render:function(){var e=this;n(this.collection.models).each(function(t){this.collection=t.get("sections");n(this.collection.models).each(function(t){e.appendItem(t)})},this);this.fixedHeader();return this},appendItem:function(e){this.$el.find(".bottom_container").append((new BudgetSectionView({model:e})).render().el)},fixedHeader:function(){var e=t("#budgetUnique"),r=t(".budget"),i=r.height(),s=t("#proposal_bottom"),o,u,a,f=0,l,c;e.width(r.width());t(window).scroll(n.throttle(function(){if(!o&&!u){o=r.offset().top-f;u=s.offset().top-i-f}a=t(window).scrollTop();if(a>o){if(!l){e.addClass("fixed");l=!0}}else if(l){e.removeClass("fixed");r.removeClass("hug_footer");l=!1;c=!1}if(a>u&&!c){e.removeClass("fixed");r.addClass("hug_footer");l=!0;c=!0}else if(c&&a<u){l=!1;c=!1}},100))}})});